<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ratings & Reviews</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap + Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      body {
        background-color: #1e1e2f;
        color: #fff;
        font-family: "Poppins", sans-serif;
        padding: 2rem;
      }

      h2 {
        text-align: center;
        color: #4ef037;
        margin-bottom: 2rem;
      }

      .movie-card {
        background-color: #2c2f48;
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      }

      .movie-poster {
        width: 100%;
        height: 300px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 1rem;
      }

      .btn-success {
        background-color: #4ef037;
        color: #000;
        font-weight: bold;
      }

      .rating-stars i {
        font-size: 1.5rem;
        color: #ccc;
        cursor: pointer;
        transition: color 0.2s;
      }

      .rating-stars i.active {
        color: gold;
      }

      .rating-count {
        margin-top: 10px;
        font-size: 0.95rem;
        color: #bbb;
      }
    </style>
  </head>
  <body>
    <h2>‚≠ê Rate These Movies</h2>

    <div class="container">
      <div class="row">
        <!-- Movie Card 1 -->
        <div class="col-md-6">
          <div class="movie-card">
            <img
              src="/images/inception.jpg"
              alt="Inception"
              class="movie-poster"
            />
            <h4>Inception</h4>
            <div class="rating-stars" data-movie="inception">
              <i class="bi bi-star" data-rating="1"></i>
              <i class="bi bi-star" data-rating="2"></i>
              <i class="bi bi-star" data-rating="3"></i>
              <i class="bi bi-star" data-rating="4"></i>
              <i class="bi bi-star" data-rating="5"></i>
            </div>
            <div class="rating-count" id="count-inception">
              Rated by 0 users
            </div>
          </div>
        </div>

        <!-- Movie Card 2 -->
        <div class="col-md-6">
          <div class="movie-card">
            <img
              src="/images/interstellar.jpg"
              alt="Interstellar"
              class="movie-poster"
            />
            <h4>Interstellar</h4>
            <div class="rating-stars" data-movie="interstellar">
              <i class="bi bi-star" data-rating="1"></i>
              <i class="bi bi-star" data-rating="2"></i>
              <i class="bi bi-star" data-rating="3"></i>
              <i class="bi bi-star" data-rating="4"></i>
              <i class="bi bi-star" data-rating="5"></i>
            </div>
            <div class="rating-count" id="count-interstellar">
              Rated by 0 users
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      const ratings = {}; // To store total ratings & count

      document.querySelectorAll(".rating-stars").forEach((starBlock) => {
        const movieId = starBlock.getAttribute("data-movie");
        const stars = starBlock.querySelectorAll("i");

        stars.forEach((star) => {
          star.addEventListener("click", () => {
            const selectedRating = parseInt(star.getAttribute("data-rating"));

            // Highlight selected stars
            stars.forEach((s) => {
              const current = parseInt(s.getAttribute("data-rating"));
              s.classList.toggle("active", current <= selectedRating);
            });

            // Store rating count (not persistent, frontend only)
            if (!ratings[movieId]) {
              ratings[movieId] = { count: 0 };
            }

            ratings[movieId].count += 1;

            // Update count display
            const countText = document.getElementById(`count-${movieId}`);
            countText.innerText = `Rated by ${ratings[movieId].count} user${
              ratings[movieId].count > 1 ? "s" : ""
            }`;
          });
        });
      });
    </script>
  </body>
</html>
